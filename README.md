# One Line a Day Back End (JWTs)

## Server
https://one-line-a-day-2.herokuapp.com/

#### Endpoints

| Method | Endpoint      | Description                                                                   | body                  |
| ------ | ------------- | ----------------------------------------------------------------------------- | --------------------- |
| POST   | /api/register | Creates a `user` using the information sent inside the `body` of the request. `username` and `email` require `unique values`, all values are require for post success. | { "username": "string", "password": "string", "firstname": "string", "lastname": "string", "email": "string" } |
| POST   | /api/login | Use the credentials sent inside the `body` to authenticate the user. On successful login, create a new JWT with the user id as the subject and send it back to the client, via localstorage. Storage KEY  = "jwt"| {"username": "string", "password": "string"} |
| GET    | /api/users | If the user is logged in, the response will contain an `array` of all the users in the database. If the user is not logged in the response will be an err code. | --- |
| GET    | /api/users/userID | `userID` is a dynamic variable set by the front end. If the user is logged in, and `userID` is correct, the response will an object with the user info. If the user is not logged in, the response will be an err code. | --- |
| DELETE | /api/users/userID | `userID` is a dynamic variable set by the front end. If the user is logged in, and `userID` is correct, the response will be an empty object and the user will be deleted from the database. If the user is not logged-in or does not contain the user the response will be an err code. | --- |
| PUT    | /api/users/userID |  `userID` is a dynamic variable set by the front end. If the user is logged in, and `userID` is correct, the response will be 1. If the user is not logged-in or does not contain the entry respond with the err code. All values are required for put success. | { "username": "string","password": "string","firstname": "string", "lastname": "string", "email": "string" } |
| GET    | /api/users/userID/entries | `userID` is a dynamic variable set by the front end. If the user is logged in, and `userID` is correct, the response will an object with the users entry info. If the user is not logged or has no entries, the response will be an err code. | --- |
| POST   | /api/users/userID/entries |`userID` is a dynamic variable set by the front end. If the user is logged in, and `userID` is correct, the response will be a new entry. If the user is not logged in repond with the err code. All values are required for a successful post. |{ "entry": "string", "user_id": number equal to the associated `user` `id` }|
| GET    | /api/users/userID/entries/entryID | `userID` and `entryID` are dynamic variable's set by the front end. If the user is logged in, `userID`/`entryID` are correct, and the entry exists, the response will be an object with the users entry. If the user is not logged-in or `userID`/`entryID` are incorrect or does not contain the entry, the response will be an err code. | --- |
| DELETE | /api/users/userID/entries/entryID | `userID` and `entryID` are dynamic variable's set by the front end. If the user is logged in, `userID`/`entryID` are correct, and the entry exists, the response will be an empty object and the entry shall be removed from the database. If the user is not logged-in or `userID`/`entryID` are incorrect or does not contain the entry, the response will be an err code. | --- |
| PUT    | /api/users/userID/entries/entryID | `userID` and `entryID` are dynamic variable's set by the front end. If the user is logged in, `userID`/`entryID` are correct, and the entry exists, the response will be a 1. If the user is not logged-in or `userID`/`entryID` are incorrect or does not contain the entry, the response will be an err code. All values are required for a successful put. | { "entry": "string", "user_id": number equal to the associated `user` `id` } |
| GET    | /api/users/quantity | The response will be the current QTY of users | --- |